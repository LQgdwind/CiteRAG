{
  "messages": [
    {
      "role": "system",
      "content": "You are a professional academic citation prediction expert. Your task is to predict the most likely citations for [ref] markers in academic paper sections based on the paper content and retrieved relevant papers.\n\nRETRIEVER INTERFACE:\n- Input: paper title + abstract + section text with [ref] markers\n- Output: top {top_r} retrieved papers with title and abstract\n- Format: List of dictionaries with 'title' and 'abstract' fields\n\nCRITICAL FORMAT REQUIREMENT: You must respond with ONLY valid JSON. Do not include any explanatory text, markdown formatting, or other content outside the JSON structure.\n\nTASK DESCRIPTION:\n- Input: Paper section text with [ref] markers + retrieved relevant papers\n- Output: top 40 predicted reference titles for each [ref] marker with reasoning\n- Format: JSON object with \"citations\" array containing objects with \"ref_index\", \"titles\", and \"reasoning\" fields\n\nREQUIREMENTS:\n1. Analyze the context around each [ref] marker to understand what reference is needed\n2. Consider the retrieved papers as potential references (when available)\n3. Consider the surrounding text, research area, and topic\n4. Generate realistic and relevant reference titles that would fit the context\n5. Provide detailed reasoning for each prediction to prevent hallucination\n6. Output format: JSON object with \"citations\" array\n7. Generate exactly 40 most relevant reference titles for each [ref]\n8. Ensure titles are realistic and appropriate for the research area\n9. Include reasoning that explains why each title is relevant to the specific [ref] context\n10. Use proper JSON escaping for special characters (escape quotes with \\\")\n11. Ensure all strings are properly quoted and escaped\n\nEXAMPLE:\nInput:\n\"Federated Learning aims to train models in massively distributed networks [ref]38 at a large scale [ref]5, over multiple sources of heterogeneous data [ref]30.\"\n\nRetrieved papers (top {top_r}):\n1. Title: Communication-efficient learning of deep networks from decentralized data\n   Abstract: We report on a series of experiments with federated learning systems for decentralized data training.\n\n2. Title: Federated Learning: Challenges, Methods, and Future Directions\n   Abstract: A comprehensive survey of federated learning approaches and challenges in distributed settings.\n\nOutput:\n{\n  \"citations\": [\n    {\n      \"ref_index\": 38,\n      \"titles\": [\n        \"Communication-efficient learning of deep networks from decentralized data\",\n        \"Federated Learning: Challenges, Methods, and Future Directions\",\n        \"Federated optimization in heterogeneous networks\",\n        \"Towards federated learning at scale: System design\",\n        \"A performance evaluation of federated learning algorithms\",\n        \"Distributed machine learning: A survey\",\n        \"Communication protocols for distributed learning\",\n        \"Scalable federated learning systems\",\n        \"Efficient distributed training algorithms\",\n        \"Large-scale distributed learning frameworks\"\n      ],\n      \"reasoning\": \"This [ref]38 appears in the context of 'massively distributed networks' for federated learning, so it likely refers to foundational papers on federated learning systems, distributed training, and communication-efficient methods in distributed networks.\"\n    },\n    {\n      \"ref_index\": 5,\n      \"titles\": [\n        \"Bagging predictors\",\n        \"Ensemble methods in machine learning\",\n        \"Random forests for classification\",\n        \"Bootstrap methods and their application\",\n        \"Combining multiple classifiers\",\n        \"Large-scale machine learning systems\",\n        \"Distributed ensemble methods\",\n        \"Scalable classification algorithms\",\n        \"Massive data processing techniques\",\n        \"High-performance machine learning frameworks\"\n      ],\n      \"reasoning\": \"This [ref]5 appears in the context of 'at a large scale', suggesting it refers to papers on scaling machine learning methods, ensemble techniques, or methods that can handle large-scale data and distributed settings.\"\n    },\n    {\n      \"ref_index\": 30,\n      \"titles\": [\n        \"Learning fair representations\",\n        \"Fair machine learning: A survey\",\n        \"Bias in machine learning systems\",\n        \"Addressing fairness in AI systems\",\n        \"Fair representation learning\",\n        \"Heterogeneous data handling methods\",\n        \"Multi-source learning algorithms\",\n        \"Cross-domain representation learning\",\n        \"Fair learning from diverse data\",\n        \"Bias mitigation in heterogeneous datasets\"\n      ],\n      \"reasoning\": \"This [ref]30 appears in the context of 'heterogeneous data' and 'fair representation learning', indicating it likely refers to papers on heterogenous data handling, bias mitigation, and learning representations that are fair across different data distributions.\"\n    }\n  ]\n}\n\nCRITICAL: Return ONLY the JSON object. Do not include any text before or after the JSON. Do not use markdown formatting. Ensure all quotes and special characters are properly escaped.\n\nIMPORTANT NOTES ON REASONING:\n- The reasoning field is crucial for preventing hallucination\n- Each reasoning should be specific to the context around the [ref] marker\n- Explain the connection between the predicted titles and the research topic\n- This helps validate that predictions are grounded in the actual content\n- Reasoning should be concise but informative (2-3 sentences)\n- Consider retrieved papers when available to improve prediction accuracy"
    },
    {
      "role": "user",
      "content": "Paper Title: The Complexity of Resilience Problems via Valued Constraint Satisfaction Problems\n\nPaper Abstract: \n\nPaper Section Text:\nConjunctive queries might not have a finite dual (see ExampleÂ 8.3), but unions of connected conjunctive queries always have a countably infinite dual. Cherlin, Shelah and ShiÂ  showed that\nin this case we may even find a dual with an oligomorphic automorphism group (see TheoremÂ 8.14 below). This is the key insight to phrase resilience problems as VCSPs for valued structures with oligomorphic automorphism groups. The not necessarily connected case again\nreduces to the connected case by CorollaryÂ 8.7. In TheoremÂ 8.14 below we state a variant of a theorem of Cherlin, Shelah, and ShiÂ  (also seeÂ  [ref]28 ).\nIf ğ”…ğ”…{\\mathfrak{B}} is a structure, we write ğ”…ppâ€‹(m)subscriptğ”…ppğ‘š{\\mathfrak{B}}_{\\text{pp}(m)} for the expansion of ğ”…ğ”…{\\mathfrak{B}} by all relations that can be defined with a connected primitive positive formula (see RemarkÂ 8.5)\nwith at most mğ‘šm variables, at least one free variable, and without equality.\nFor a union of conjunctive queries Î¼ğœ‡\\mu over the signature Ï„ğœ\\tau, we write |Î¼|ğœ‡|\\mu| for the maximum of the number of variables of each conjunctive query in Î¼ğœ‡\\mu, the maximal arity of Ï„ğœ\\tau, and 2. For every union Î¼ğœ‡\\mu of connected conjunctive queries over a finite relational signature Ï„ğœ\\tau there exists a Ï„ğœ\\tau-structure ğ”…Î¼subscriptğ”…ğœ‡{\\mathfrak{B}}_{\\mu} such that the following statements hold: (ğ”…Î¼)ppâ€‹(|Î¼|)subscriptsubscriptğ”…ğœ‡ppğœ‡({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)} is homogeneous. Ageâ¡(ğ”…ppâ€‹(|Î¼|))Agesubscriptğ”…ppğœ‡\\operatorname{Age}({\\mathfrak{B}}_{\\text{pp}(|\\mu|)}) is the class of all substructures of structures of the form ğ”„ppâ€‹(|Î¼|)subscriptğ”„ppğœ‡{\\mathfrak{A}}_{\\text{pp}(|\\mu|)} for a finite structure ğ”„ğ”„{\\mathfrak{A}} that satisfies Â¬Î¼ğœ‡\\neg\\mu. A countable\nÏ„ğœ\\tau-structure ğ”„ğ”„{\\mathfrak{A}} satisfies Â¬Î¼ğœ‡\\neg\\mu if and only if it embeds into ğ”…Î¼subscriptğ”…ğœ‡{\\mathfrak{B}}_{\\mu}. ğ”…Î¼subscriptğ”…ğœ‡{\\mathfrak{B}}_{\\mu} is finitely bounded. Autâ¡(ğ”…Î¼)Autsubscriptğ”…ğœ‡\\operatorname{Aut}({\\mathfrak{B}}_{\\mu}) is oligomorphic. (ğ”…Î¼)ppâ€‹(|Î¼|)subscriptsubscriptğ”…ğœ‡ppğœ‡({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)} is finitely bounded. The construction of a structure ğ”…Î¼subscriptğ”…ğœ‡{\\mathfrak{B}}_{\\mu}\nwith the given properties\nfollows from a proof of HubiÄka and NeÅ¡etÅ™ilÂ [ref]28  of the theorem of Cherlin, Shelah, and ShiÂ , and can be found inÂ [5, Theorem 4.3.8].\nProperties (1), (2) and property (3) restricted to finite structures ğ”„ğ”„{\\mathfrak{A}} are explicitly stated inÂ [5, Theorem 4.3.8].\nProperty (3) restricted to finite structures clearly implies property (4). Property (5) holds because homogeneous structures with a finite relational signature have an oligomorphic automorphism group.\nPropertyÂ (3) for countable structures now follows fromÂ [5, Lemma 4.1.7]. Since we are not aware of a reference for (6) in the literature, we present a proof here. Let Ïƒğœ\\sigma be the signature of (ğ”…Î¼)ppâ€‹(|Î¼|)subscriptsubscriptğ”…ğœ‡ppğœ‡({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)}.\nWe claim that the following universal Ïƒğœ\\sigma-sentence Ïˆğœ“\\psi describes the structures in the age of\n(ğ”…Î¼)ppâ€‹(|Î¼|)subscriptsubscriptğ”…ğœ‡ppğœ‡({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)}.\nIf Ï•italic-Ï•\\phi is a Ïƒğœ\\sigma-sentence, then Ï•â€²superscriptitalic-Ï•â€²\\phi^{\\prime} denotes the Ï„ğœ\\tau-sentence obtained from Ï•italic-Ï•\\phi by replacing every occurrence of Râ€‹(xÂ¯)ğ‘…Â¯ğ‘¥R(\\bar{x}), for RâˆˆÏƒâˆ–Ï„ğ‘…ğœğœR\\in\\sigma\\setminus\\tau,\nby the primitive positive Ï„ğœ\\tau-formula Î·â€‹(xÂ¯)ğœ‚Â¯ğ‘¥\\eta(\\bar{x}) for which Rğ‘…R was introduced in (ğ”…Î¼)ppâ€‹(|Î¼|)subscriptsubscriptğ”…ğœ‡ppğœ‡({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)}.\nThen Ïˆğœ“\\psi\nis a conjunction\nof all Ïƒğœ\\sigma-sentences Â¬Ï•italic-Ï•\\neg\\phi such that Ï•italic-Ï•\\phi is primitive positive,\nÏ•â€²superscriptitalic-Ï•â€²\\phi^{\\prime} has at most |Î¼|ğœ‡|\\mu| variables, and Ï•â€²superscriptitalic-Ï•â€²\\phi^{\\prime} implies Î¼ğœ‡\\mu.\nClearly, there are finitely many conjuncts of this form. Suppose that ğ”„âˆˆAge(ğ”…Î¼)ppâ€‹(|Î¼|){\\mathfrak{A}}\\in\\operatorname{Age}({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)}.\nThen ğ”„ğ”„{\\mathfrak{A}} satisfies each conjunct Â¬Ï•italic-Ï•\\neg\\phi of Ïˆğœ“\\psi, because otherwise ğ”…Î¼subscriptğ”…ğœ‡{\\mathfrak{B}}_{\\mu} satisfies Ï•â€²superscriptitalic-Ï•â€²\\phi^{\\prime}, and thus satisfies Î¼ğœ‡\\mu, contrary to our assumptions. The interesting direction is that if a finite Ïƒğœ\\sigma-structure ğ”„ğ”„{\\mathfrak{A}} satisfies Ïˆğœ“\\psi, then ğ”„ğ”„{\\mathfrak{A}} embeds into (ğ”…Î¼)ppâ€‹(|Î¼|)subscriptsubscriptğ”…ğœ‡ppğœ‡({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)}.\nLet Ï•italic-Ï•\\phi be the canonical query of ğ”„ğ”„{\\mathfrak{A}}.\nLet ğ”„â€²superscriptğ”„â€²{\\mathfrak{A}}^{\\prime} be the canonical database of the Ï„ğœ\\tau-formula Ï•â€²superscriptitalic-Ï•â€²\\phi^{\\prime}.\nSuppose for contradiction that ğ”„â€²âŠ§Î¼modelssuperscriptğ”„â€²ğœ‡{\\mathfrak{A}}^{\\prime}\\models\\mu.\nLet Ï‡ğœ’\\chi be a minimal subformula of Ï•italic-Ï•\\phi such that\nthe canonical database of Ï‡ğœ’\\chi models Î¼ğœ‡\\mu.\nThen Ï‡ğœ’\\chi has at most |Î¼|ğœ‡|\\mu| variables and implies Î¼ğœ‡\\mu, and hence Â¬Ï‡ğœ’\\neg\\chi is a conjunct of of Ïˆğœ“\\psi which is not satisfied by ğ”„ğ”„{\\mathfrak{A}}, a contradiction to our assumptions.\nTherefore, ğ”„â€²âŠ§Â¬Î¼modelssuperscriptğ”„â€²ğœ‡{\\mathfrak{A}}^{\\prime}\\models\\neg\\mu and by Property (2), we have that ğ”„ppâ€‹(|Î¼|)â€²subscriptsuperscriptğ”„â€²ppğœ‡{\\mathfrak{A}}^{\\prime}_{\\text{pp}(|\\mu|)}\nhas an embedding fğ‘“f into (ğ”…Î¼)ppâ€‹(|Î¼|)subscriptsubscriptğ”…ğœ‡ppğœ‡({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)}. We claim that the restriction of fğ‘“f to the elements of ğ”„ğ”„{\\mathfrak{A}} is an embedding of ğ”„ğ”„{\\mathfrak{A}} into (ğ”…Î¼)ppâ€‹(|Î¼|)subscriptsubscriptğ”…ğœ‡ppğœ‡({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)}. Clearly, if ğ”„âŠ§Râ€‹(xÂ¯)modelsğ”„ğ‘…Â¯ğ‘¥{\\mathfrak{A}}\\models R(\\bar{x}) for some relation Rğ‘…R that has been introduced for a primitive positive formula Î·ğœ‚\\eta, then ğ”„â€²superscriptğ”„â€²{\\mathfrak{A}}^{\\prime} satisfies Î·â€‹(xÂ¯)ğœ‚Â¯ğ‘¥\\eta(\\bar{x}),\nand hence ğ”…Î¼âŠ§Î·â€‹(fâ€‹(xÂ¯))modelssubscriptğ”…ğœ‡ğœ‚ğ‘“Â¯ğ‘¥{\\mathfrak{B}}_{\\mu}\\models\\eta(f(\\bar{x})), which in turn implies that\n(ğ”…Î¼)ppâ€‹(|Î¼|)âŠ§Râ€‹(fâ€‹(xÂ¯))modelssubscriptsubscriptğ”…ğœ‡ppğœ‡ğ‘…ğ‘“Â¯ğ‘¥({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)}\\models R(f(\\bar{x})) as desired.\nConversely, if (ğ”…Î¼)ppâ€‹(|Î¼|)âŠ§Râ€‹(fâ€‹(xÂ¯))modelssubscriptsubscriptğ”…ğœ‡ppğœ‡ğ‘…ğ‘“Â¯ğ‘¥({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)}\\models R(f(\\bar{x})), then\nğ”„ppâ€‹(|Î¼|)â€²âŠ§Râ€‹(xÂ¯)modelssubscriptsuperscriptğ”„â€²ppğœ‡ğ‘…Â¯ğ‘¥{\\mathfrak{A}}^{\\prime}_{\\text{pp}(|\\mu|)}\\models R(\\bar{x}), and hence ğ”„â€²âŠ§Î·â€‹(xÂ¯)modelssuperscriptğ”„â€²ğœ‚Â¯ğ‘¥{\\mathfrak{A}}^{\\prime}\\models\\eta(\\bar{x}).\nThis in turn implies that ğ”„âŠ§Râ€‹(xÂ¯)modelsğ”„ğ‘…Â¯ğ‘¥{\\mathfrak{A}}\\models R(\\bar{x}).\nSince the restriction of fğ‘“f and its inverse preserve the relations from Ï„ğœ\\tau trivially, we conclude that ğ”„ğ”„{\\mathfrak{A}} embeds into (ğ”…Î¼)ppâ€‹(|Î¼|)subscriptsubscriptğ”…ğœ‡ppğœ‡({\\mathfrak{B}}_{\\mu})_{\\text{pp}(|\\mu|)}.\nâˆ By Properties (1) and (6) of TheoremÂ 8.14, ğ”…Î¼subscriptğ”…ğœ‡{\\mathfrak{B}}_{\\mu} is always a reduct of a finitely bounded homogeneous structure. For short, we write Î“Î¼subscriptÎ“ğœ‡\\Gamma_{\\mu} for Î“â€‹(ğ”…Î¼,âˆ…)Î“subscriptğ”…ğœ‡\\Gamma({\\mathfrak{B}}_{\\mu},\\emptyset) and Î“Î¼,ÏƒsubscriptÎ“ğœ‡ğœ\\Gamma_{\\mu,\\sigma} for Î“â€‹(ğ”…Î¼,Ïƒ)Î“subscriptğ”…ğœ‡ğœ\\Gamma({\\mathfrak{B}}_{\\mu},\\sigma), see DefinitionÂ 8.10.\nFor some queries Î¼ğœ‡\\mu, the structure ğ”…Î¼subscriptğ”…ğœ‡{\\mathfrak{B}}_{\\mu} can be replaced by a simpler structure â„­Î¼subscriptâ„­ğœ‡{\\mathfrak{C}}_{\\mu}. This will be\nconvenient for some examples that we consider later, because the structure â„­Î¼subscriptâ„­ğœ‡{\\mathfrak{C}}_{\\mu} is finitely bounded and homogeneous itself and hence admits the application of TheoremÂ 7.17.\nTo define the respective class of queries, we need the following definition. The Gaifman graph of a\nrelational structure ğ”„ğ”„{\\mathfrak{A}}\nis the undirected graph with vertex set Ağ´A where a,bâˆˆAğ‘ğ‘ğ´a,b\\in A are adjacent if and only if aâ‰ bğ‘ğ‘a\\neq b and there exists a tuple in a relation of ğ”„ğ”„{\\mathfrak{A}} that contains both ağ‘a and bğ‘b. The Gaifman graph of a conjunctive query is the Gaifman graph of the canonical database of that query. For every union Î¼ğœ‡\\mu of connected conjunctive queries over a finite relational signature Ï„ğœ\\tau such that the Gaifman graph of each of the conjunctive queries in Î¼ğœ‡\\mu is complete, there exists a countable Ï„ğœ\\tau-structure â„­Î¼subscriptâ„­ğœ‡{\\mathfrak{C}}_{\\mu} such that the following statements hold: â„­Î¼subscriptâ„­ğœ‡{\\mathfrak{C}}_{\\mu} is homogeneous. Ageâ¡(â„­Î¼)Agesubscriptâ„­ğœ‡\\operatorname{Age}({\\mathfrak{C}}_{\\mu}) is the class of all finite structures ğ”„ğ”„{\\mathfrak{A}} that satisfy Â¬Î¼ğœ‡\\neg\\mu. Moreover, â„­Î¼subscriptâ„­ğœ‡{\\mathfrak{C}}_{\\mu} is finitely bounded, Autâ¡(â„­Î¼)Autsubscriptâ„­ğœ‡\\operatorname{Aut}({\\mathfrak{C}}_{\\mu}) is oligomorphic, and a countable Ï„ğœ\\tau-structure satisfies Â¬Î¼ğœ‡\\neg\\mu if and only if it embeds into â„­Î¼subscriptâ„­ğœ‡{\\mathfrak{C}}_{\\mu}. Let ğ”„1subscriptğ”„1{\\mathfrak{A}}_{1} and ğ”„2subscriptğ”„2{\\mathfrak{A}}_{2} be finite Ï„ğœ\\tau-structures that satisfy Â¬Î¼ğœ‡\\neg\\mu such that the substructure induced by A1âˆ©A2subscriptğ´1subscriptğ´2A_{1}\\cap A_{2} in ğ”„1subscriptğ”„1{\\mathfrak{A}}_{1} and ğ”„2subscriptğ”„2{\\mathfrak{A}}_{2} is the same. Since the Gaifman graph of each of the conjunctive queries in Î¼ğœ‡\\mu is complete, the union of the structures ğ”„1subscriptğ”„1{\\mathfrak{A}}_{1} and ğ”„2subscriptğ”„2{\\mathfrak{A}}_{2} satisfies Â¬Î¼ğœ‡\\neg\\mu as well. By FraÃ¯ssÃ©â€™s Theorem (see, e.g., )\nthere is a countable homogeneous Ï„ğœ\\tau-structure â„­Î¼subscriptâ„­ğœ‡{\\mathfrak{C}}_{\\mu} such that Ageâ¡(â„­Î¼)Agesubscriptâ„­ğœ‡\\operatorname{Age}({\\mathfrak{C}}_{\\mu}) is the class of all finite structures that satisfy Â¬Î¼ğœ‡\\neg\\mu; this shows that â„­Î¼subscriptâ„­ğœ‡{\\mathfrak{C}}_{\\mu} is finitely bounded.\nHomogeneous structures with finite relational signature clearly have an oligomorphic automorphism group.\nFor the final statement, seeÂ [5, Lemma 4.1.7].\nâˆ Note that â„­Î¼subscriptâ„­ğœ‡{\\mathfrak{C}}_{\\mu} is homomorphically equivalent to ğ”…Î¼subscriptğ”…ğœ‡{\\mathfrak{B}}_{\\mu} by [5, Lemma 4.1.7]. Therefore, Î“â€‹(â„­Î¼,Ïƒ)Î“subscriptâ„­ğœ‡ğœ\\Gamma({\\mathfrak{C}}_{\\mu},\\sigma) is homomorphically equivalent to Î“Î¼,ÏƒsubscriptÎ“ğœ‡ğœ\\Gamma_{\\mu,\\sigma} for any ÏƒâŠ†Ï„ğœğœ\\sigma\\subseteq\\tau. The following proposition follows straightforwardly from the definitions and provides a valued constraint satisfaction problem that is polynomial-time equivalent to the resilience problem for Î¼ğœ‡\\mu, similar to TheoremÂ 8.11. The resilience problem for a\nunion of connected conjunctive queries Î¼ğœ‡\\mu\nwhere the relations\nfrom ÏƒâŠ†Ï„ğœğœ\\sigma\\subseteq\\tau\nare exogenous\nis polynomial-time equivalent to\nVCSPâ¡(Î“â€‹(ğ”…,Ïƒ))VCSPÎ“ğ”…ğœ\\operatorname{VCSP}(\\Gamma({\\mathfrak{B}},\\sigma)) for any dual ğ”…ğ”…{\\mathfrak{B}} of Î¼ğœ‡\\mu; in particular, to VCSPâ¡(Î“Î¼,Ïƒ)VCSPsubscriptÎ“ğœ‡ğœ\\operatorname{VCSP}(\\Gamma_{\\mu,\\sigma}). Let ğ”…ğ”…{\\mathfrak{B}} be a dual of Î¼ğœ‡\\mu.\nFor every bag database ğ”„ğ”„{\\mathfrak{A}} over signature Ï„ğœ\\tau and with exogenous relations from Ïƒğœ\\sigma,\nlet Ï•italic-Ï•\\phi\nbe the\nÏ„ğœ\\tau-expression\nobtained by adding atomic Ï„ğœ\\tau-expressions Sâ€‹(x1,â€¦,xn)ğ‘†subscriptğ‘¥1â€¦subscriptğ‘¥ğ‘›S(x_{1},\\dots,x_{n}) according to the multiplicity of the tuples (x1,â€¦,xn)subscriptğ‘¥1â€¦subscriptğ‘¥ğ‘›(x_{1},\\dots,x_{n}) in Sğ”„superscriptğ‘†ğ”„S^{{\\mathfrak{A}}} for all SâˆˆÏ„ğ‘†ğœS\\in\\tau.\nNote that Ï•italic-Ï•\\phi can be computed in polynomial time.\nThen the resilience of ğ”„ğ”„{\\mathfrak{A}} with respect to Î¼ğœ‡\\mu\nis at most uğ‘¢u if and only if (Ï•,u)italic-Ï•ğ‘¢(\\phi,u) has a solution over\nÎ“â€‹(ğ”…,Ïƒ)Î“ğ”…ğœ\\Gamma({\\mathfrak{B}},\\sigma). To prove a polynomial-time reduction in the other direction,\nlet Ï•italic-Ï•\\phi be a Ï„ğœ\\tau-expression. We construct a bag database ğ”„ğ”„{\\mathfrak{A}} with signature Ï„ğœ\\tau. The domain of ğ”„ğ”„{\\mathfrak{A}} are the variables that appear in Ï•italic-Ï•\\phi and for every SâˆˆÏ„ğ‘†ğœS\\in\\tau\nand tuple (x1,â€¦,xn)âˆˆSğ”„subscriptğ‘¥1â€¦subscriptğ‘¥ğ‘›superscriptğ‘†ğ”„(x_{1},\\dots,x_{n})\\in S^{{\\mathfrak{A}}}, its multiplicity in ğ”„ğ”„{\\mathfrak{A}} is the\nnumber of times that\n(x1,â€¦,xn)subscriptğ‘¥1â€¦subscriptğ‘¥ğ‘›(x_{1},\\dots,x_{n}) in Sğ”„superscriptğ‘†ğ”„S^{{\\mathfrak{A}}} occurs as a summand of Ï•italic-Ï•\\phi.\nThe relations Sğ”„superscriptğ‘†ğ”„S^{{\\mathfrak{A}}} with SâˆˆÏƒğ‘†ğœS\\in\\sigma are exogenous in ğ”„ğ”„{\\mathfrak{A}}, the remaining ones are endogenous.\nAgain, ğ”„ğ”„{\\mathfrak{A}} can be computed in polynomial time and the resilience of ğ”„ğ”„{\\mathfrak{A}} with respect to Î¼ğœ‡\\mu is at most uğ‘¢u if and only if (Ï•,u)italic-Ï•ğ‘¢(\\phi,u) has a solution over Î“â€‹(ğ”…,Ïƒ)Î“ğ”…ğœ\\Gamma({\\mathfrak{B}},\\sigma).\nâˆ InÂ  one may find a seemingly more general notion of exogenous tuples, where in a single relation there might be both endogenous and exogenous tuples. Using PropositionÂ 8.16 and LemmaÂ 4.7, however, we can show that classifying the complexity of resilience problems according to our original definition also entails a classification of this variant. Let Î¼ğœ‡\\mu be a union of conjunctive queries with the signature Ï„ğœ\\tau, let ÏƒâŠ†Ï„ğœğœ\\sigma\\subseteq\\tau, and let ÏâŠ†Ï„âˆ–ÏƒğœŒğœğœ\\rho\\subseteq\\tau\\setminus\\sigma. Suppose we would like to model the resilience problem for Î¼ğœ‡\\mu where the relations in Ïƒğœ\\sigma are exogenous and the relations in ÏğœŒ\\rho might contain both endogenous and exogenous tuples. Let ğ”…ğ”…{\\mathfrak{B}} be a dual of Î¼ğœ‡\\mu and Î“Î“\\Gamma be the expansion of Î“â€‹(ğ”…,Ïƒ)Î“ğ”…ğœ\\Gamma({\\mathfrak{B}},\\sigma) where for every relational symbol RâˆˆÏğ‘…ğœŒR\\in\\rho, there is also a relation (Rx)Î“=Rğ”…superscriptsuperscriptğ‘…ğ‘¥Î“superscriptğ‘…ğ”…(R^{x})^{\\Gamma}=R^{{\\mathfrak{B}}}, i.e., a classical relation that takes values 00 and âˆ\\infty. The resilience problem for Î¼ğœ‡\\mu with exogenous tuples specified as above is polynomial-time equivalent to VCSPâ¡(Î“)VCSPÎ“\\operatorname{VCSP}(\\Gamma) by analogous reductions as in PropositionÂ 8.16.\nNote that (Rx)Î“=Optâ¡(RÎ“â€‹(ğ”…,Ïƒ))superscriptsuperscriptğ‘…ğ‘¥Î“Optsuperscriptğ‘…Î“ğ”…ğœ(R^{x})^{\\Gamma}=\\operatorname{Opt}\\big{(}R^{\\Gamma({\\mathfrak{B}},\\sigma)}\\big{)} for every RâˆˆÏğ‘…ğœŒR\\in\\rho, and therefore by LemmaÂ 4.7, VCSPâ¡(Î“)VCSPÎ“\\operatorname{VCSP}(\\Gamma) is polynomial-time equivalent to VCSPâ¡(Î“â€‹(ğ”…,Ïƒ))VCSPÎ“ğ”…ğœ\\operatorname{VCSP}(\\Gamma({\\mathfrak{B}},\\sigma)) and thus to the resilience problem for Î¼ğœ‡\\mu where the relations in Ïƒğœ\\sigma are exogeneous and the relations in Ï„âˆ–Ïƒğœğœ\\tau\\setminus\\sigma are purely endogeneous. This justifies the restriction to our setting for exogenous tuples. Moreover, the same argument shows that if resilience of Î¼ğœ‡\\mu with all tuples endogenous is in P, then all variants of resilience of Î¼ğœ‡\\mu with exogenous tuples are in P as well. Similarly as in ExampleÂ 8.13, PropositionÂ 8.16 can be combined with the tractability results for VCSPs from SectionÂ 7 that use fractional polymorphisms to prove tractability of resilience problems. We revisit ExampleÂ 8.3. Consider the conjunctive query\nâˆƒx,y,zâ€‹(Râ€‹(x,y)âˆ§Sâ€‹(x,y,z))ğ‘¥ğ‘¦ğ‘§ğ‘…ğ‘¥ğ‘¦ğ‘†ğ‘¥ğ‘¦ğ‘§\\exists x,y,z\\,(R(x,y)\\wedge S(x,y,z)) over the signature Ï„={R,S}ğœğ‘…ğ‘†\\tau=\\{R,S\\}.\nNote that the Gaifman graph of Î¼ğœ‡\\mu is complete; let â„­Î¼subscriptâ„­ğœ‡{\\mathfrak{C}}_{\\mu} be the structure from TheoremÂ 8.15. We construct a binary pseudo cyclic canonical fractional polymorphism of Î“â€‹(â„­Î¼,âˆ…)Î“subscriptâ„­ğœ‡\\Gamma({\\mathfrak{C}}_{\\mu},\\emptyset).\nLet ğ”ğ”{\\mathfrak{M}} be the Ï„ğœ\\tau-structure with\ndomain (CÎ¼)2superscriptsubscriptğ¶ğœ‡2(C_{\\mu})^{2}\nand where ((b11,b12),(b21,b22))âˆˆRğ”subscriptsuperscriptğ‘11subscriptsuperscriptğ‘21subscriptsuperscriptğ‘12subscriptsuperscriptğ‘22superscriptğ‘…ğ”((b^{1}_{1},b^{2}_{1}),(b^{1}_{2},b^{2}_{2}))\\in R^{{\\mathfrak{M}}} if and only if\n(b11,b21)âˆˆRâ„­Î¼subscriptsuperscriptğ‘11subscriptsuperscriptğ‘12superscriptğ‘…subscriptâ„­ğœ‡(b^{1}_{1},b^{1}_{2})\\in R^{{\\mathfrak{C}}_{\\mu}} and\n(b12,b22)âˆˆRâ„­Î¼subscriptsuperscriptğ‘21subscriptsuperscriptğ‘22superscriptğ‘…subscriptâ„­ğœ‡(b^{2}_{1},b^{2}_{2})\\in R^{{\\mathfrak{C}}_{\\mu}}, and ((b11,b12),(b21,b22),(b31,b32))âˆˆSğ”subscriptsuperscriptğ‘11subscriptsuperscriptğ‘21subscriptsuperscriptğ‘12subscriptsuperscriptğ‘22subscriptsuperscriptğ‘13subscriptsuperscriptğ‘23superscriptğ‘†ğ”((b^{1}_{1},b^{2}_{1}),(b^{1}_{2},b^{2}_{2}),(b^{1}_{3},b^{2}_{3}))\\in S^{{\\mathfrak{M}}} if and only if\n(b11,b21,b31)âˆˆSâ„­Î¼subscriptsuperscriptğ‘11subscriptsuperscriptğ‘12subscriptsuperscriptğ‘13superscriptğ‘†subscriptâ„­ğœ‡(b^{1}_{1},b^{1}_{2},b^{1}_{3})\\in S^{{\\mathfrak{C}}_{\\mu}} or\n(b12,b22,b32)âˆˆSâ„­Î¼subscriptsuperscriptğ‘21subscriptsuperscriptğ‘22subscriptsuperscriptğ‘23superscriptğ‘†subscriptâ„­ğœ‡(b^{2}_{1},b^{2}_{2},b^{2}_{3})\\in S^{{\\mathfrak{C}}_{\\mu}}. Similarly, let ğ”‘ğ”‘{\\mathfrak{N}} be the Ï„ğœ\\tau-structure with\ndomain (CÎ¼)2superscriptsubscriptğ¶ğœ‡2(C_{\\mu})^{2}\nand where ((b11,b12),(b21,b22))âˆˆRğ”‘subscriptsuperscriptğ‘11subscriptsuperscriptğ‘21subscriptsuperscriptğ‘12subscriptsuperscriptğ‘22superscriptğ‘…ğ”‘((b^{1}_{1},b^{2}_{1}),(b^{1}_{2},b^{2}_{2}))\\in R^{{\\mathfrak{N}}} if and only if\n(b11,b21)âˆˆRâ„­Î¼subscriptsuperscriptğ‘11subscriptsuperscriptğ‘12superscriptğ‘…subscriptâ„­ğœ‡(b^{1}_{1},b^{1}_{2})\\in R^{{\\mathfrak{C}}_{\\mu}} or\n(b12,b22)âˆˆRâ„­Î¼subscriptsuperscriptğ‘21subscriptsuperscriptğ‘22superscriptğ‘…subscriptâ„­ğœ‡(b^{2}_{1},b^{2}_{2})\\in R^{{\\mathfrak{C}}_{\\mu}}, and ((b11,b12),(b21,b22),(b31,b32))âˆˆSğ”‘subscriptsuperscriptğ‘11subscriptsuperscriptğ‘21subscriptsuperscriptğ‘12subscriptsuperscriptğ‘22subscriptsuperscriptğ‘13subscriptsuperscriptğ‘23superscriptğ‘†ğ”‘((b^{1}_{1},b^{2}_{1}),(b^{1}_{2},b^{2}_{2}),(b^{1}_{3},b^{2}_{3}))\\in S^{{\\mathfrak{N}}} if and only if\n(b11,b21,b31)âˆˆSâ„­Î¼subscriptsuperscriptğ‘11subscriptsuperscriptğ‘12subscriptsuperscriptğ‘13superscriptğ‘†subscriptâ„­ğœ‡(b^{1}_{1},b^{1}_{2},b^{1}_{3})\\in S^{{\\mathfrak{C}}_{\\mu}} and\n(b12,b22,b32)âˆˆSâ„­Î¼subscriptsuperscriptğ‘21subscriptsuperscriptğ‘22subscriptsuperscriptğ‘23superscriptğ‘†subscriptâ„­ğœ‡(b^{2}_{1},b^{2}_{2},b^{2}_{3})\\in S^{{\\mathfrak{C}}_{\\mu}}. Note that ğ”âŠ§Ì¸Î¼not-modelsğ”ğœ‡{\\mathfrak{M}}\\not\\models\\mu and hence\nthere exists an embedding f:ğ”â†’â„­Î¼:ğ‘“â†’ğ”subscriptâ„­ğœ‡f\\colon{\\mathfrak{M}}\\to{\\mathfrak{C}}_{\\mu}.\nSimilarly, there\nexists an embedding g:ğ”‘â†’â„­Î¼:ğ‘”â†’ğ”‘subscriptâ„­ğœ‡g\\colon{\\mathfrak{N}}\\to{\\mathfrak{C}}_{\\mu}.\nClearly, both fğ‘“f and gğ‘”g regarded as operations on the set CÎ¼subscriptğ¶ğœ‡C_{\\mu} are pseudo cyclic (but in general not cyclic) and canonical with respect to Autâ¡(â„­Î¼)Autsubscriptâ„­ğœ‡\\operatorname{Aut}({\\mathfrak{C}}_{\\mu}) (see Claim 6 in PropositionÂ 8.22 for a detailed argument of this type). Let Ï‰ğœ”\\omega be the fractional operation given by Ï‰â€‹(f)=12ğœ”ğ‘“12\\omega(f)=\\frac{1}{2} and Ï‰â€‹(g)=12ğœ”ğ‘”12\\omega(g)=\\frac{1}{2}.\nThen Ï‰ğœ”\\omega is a binary fractional polymorphism of Î“:=Î“â€‹(â„­Î¼,âˆ…)assignÎ“Î“subscriptâ„­ğœ‡\\Gamma:=\\Gamma({\\mathfrak{C}}_{\\mu},\\emptyset):\nfor b1,b2âˆˆ(CÎ¼)2superscriptğ‘1superscriptğ‘2superscriptsubscriptğ¶ğœ‡2b^{1},b^{2}\\in(C_{\\mu})^{2} we have so Ï‰ğœ”\\omega improves Rğ‘…R, and similarly we see that Ï‰ğœ”\\omega improves Sğ‘†S. We proved that the corresponding valued structure has a binary canonical pseudo cyclic fractional polymorphism. By TheoremÂ 7.17 and 8.16, this reproves the results from [ref]21 (without multiplicities) and  (with multiplicities) that the resilience problem for this query is in P.\n\nReference markers found: [28]\n\nContext windows for each [ref]:\n[ref]28: groups. The not necessarily connected case again\nreduces to the connected case by CorollaryÂ 8.7. In TheoremÂ 8.14 below we state a variant of a theorem of Cherlin, Shelah, and ShiÂ  (also seeÂ  [ref]28 ).\nIf ğ”…ğ”…{\\mathfrak{B}} is a structure, we write ğ”…ppâ€‹(m)subscriptğ”…ppğ‘š{\\mathfrak{B}}_{\\text{pp}(m)} for the expansion of ğ”…ğ”…{\\mathfrak{B}} by all relations that can be defined with a connected\n\n{retrieved_text}\n\nGenerate exactly 40 most likely reference titles for each [ref] marker. Focus on papers that are directly related to the research topic, provide foundational background, present similar methodologies, or address related problems.\n\nCRITICAL REQUIREMENTS:\n1. For each [ref] marker, provide detailed reasoning explaining why the predicted titles are relevant\n2. The reasoning should analyze the specific context around each [ref] marker\n3. Explain how each title connects to the research topic, methodology, or problem being discussed\n4. This reasoning helps prevent hallucination by grounding predictions in the actual context\n5. Consider retrieved papers when available to improve prediction accuracy\n\nCRITICAL FORMAT REQUIREMENT: You must respond with ONLY valid JSON. Do not include any explanatory text, markdown formatting, or other content outside the JSON structure.\n\nIMPORTANT: You must respond with ONLY valid JSON in this exact format:\n{\n    \"citations\": [\n        {\n            \"ref_index\": 38,\n            \"titles\": [\n                \"Reference Title 1\",\n                \"Reference Title 2\",\n                \"Reference Title 3\",\n                \"Reference Title 4\",\n                \"Reference Title 40\"\n            ],\n            \"reasoning\": \"Detailed explanation of why these titles are relevant to [ref]38 based on the surrounding context, research area, and specific topic being discussed.\"\n        }\n    ]\n}\n\nCRITICAL: Return ONLY the JSON object. Do not include any text before or after the JSON. Do not use markdown formatting. Ensure all quotes and special characters are properly escaped. Do not include authors, venues, or years - only the paper titles. Generate exactly 40 titles for each [ref] marker with reasoning."
    },
    {
      "role": "assistant",
      "content": "{\n    \"citations\": [\n        {\n            \"ref_index\": 28,\n            \"titles\": [\n                \"Bag Query Containment and Information Theory\",\n                \"Correlation clustering\",\n                \"Absorbing subalgebras, cyclic terms and the constraint satisfaction problem\",\n                \"The Wonderland of Reflections\",\n                \"Cores of countably categorical structures\",\n                \"Complexity of Infinite-Domain Constraint Satisfaction\",\n                \"The complexity of equality constraint languages\",\n                \"Piecewise linear valued CSPs solvable by linear programming relaxation\",\n                \"A dichotomy for first-order reducts of unary structures\",\n                \"Constraint satisfaction with countable homogeneous templates\",\n                \"Projective clone homomorphisms\",\n                \"A dichotomy theorem for nonuniform CSPs\",\n                \"Symmetries in Constraint Satisfaction: Weisfeiler-Leman Invariance and Promise Problems\",\n                \"View-based query processing and constraint satisfaction\",\n                \"Optimization of real conjunctive queries\",\n                \"Universal graphs with forbidden subgraphs and algebraic closure\",\n                \"An algebraic theory of complexity for discrete optimization\",\n                \"An algebraic characterisation of complexity for valued constraints\",\n                \"Parameterized Algorithms\",\n                \"Homomorphisms and structural properties of relational systems\",\n                \"A Characterization of the Complexity of Resilience and Responsibility for Self-join-free Conjunctive Queries\",\n                \"The complexity of resilience and responsibility for self-join-free conjunctive queries\",\n                \"New Results for the Complexity of Resilience for Binary Conjunctive Queries with Self-Joins\",\n                \"A Galois connection for weighted (relational) clones of infinite size\",\n                \"A guide to NP-completeness\",\n                \"A new approach to the maximum-flow problem\",\n                \"A shorter model theory\",\n                \"Universal structures with forbidden homomorphisms\",\n                \"Homomorphism and embedding universal structures for restricted classes\",\n                \"Solving hard cut problems via flow-augmentation\",\n                \"Directed flow-augmentation\",\n                \"Testing the complexity of a valued CSP language\",\n                \"The complexity of general-valued CSPs\",\n                \"The power of linear programming for general-valued CSPs\",\n                \"Algebraic Properties of Valued Constraint Satisfaction Problem\",\n                \"The Complexity of Valued CSPs\",\n                \"A characterisation of first-order constraint satisfaction problems\",\n                \"A Unified Approach for Resilience and Causal Responsibility with Integer Linear Programming (ILP) and LP Relaxations\",\n                \"The complexity of causality and responsibility for query answers and non-answers\",\n                \"Cores over Ramsey structures\"\n            ],\n            \"reasoning\": \"Selected these 40 citations for [ref]28 based on the context and research area of The Complexity of Resilience Problems via Valued Constraint Satisfaction Problems. The first title is the actual reference for this marker, followed by other relevant papers from the same research domain.\"\n        }\n    ]\n}"
    }
  ],
  "format": "chatml"
}