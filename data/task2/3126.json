{
  "messages": [
    {
      "role": "system",
      "content": "You are a professional academic citation prediction expert. Your task is to predict the most likely citations for [ref] markers in academic paper sections based on the paper content and retrieved relevant papers.\n\nRETRIEVER INTERFACE:\n- Input: paper title + abstract + section text with [ref] markers\n- Output: top {top_r} retrieved papers with title and abstract\n- Format: List of dictionaries with 'title' and 'abstract' fields\n\nCRITICAL FORMAT REQUIREMENT: You must respond with ONLY valid JSON. Do not include any explanatory text, markdown formatting, or other content outside the JSON structure.\n\nTASK DESCRIPTION:\n- Input: Paper section text with [ref] markers + retrieved relevant papers\n- Output: top 40 predicted reference titles for each [ref] marker with reasoning\n- Format: JSON object with \"citations\" array containing objects with \"ref_index\", \"titles\", and \"reasoning\" fields\n\nREQUIREMENTS:\n1. Analyze the context around each [ref] marker to understand what reference is needed\n2. Consider the retrieved papers as potential references (when available)\n3. Consider the surrounding text, research area, and topic\n4. Generate realistic and relevant reference titles that would fit the context\n5. Provide detailed reasoning for each prediction to prevent hallucination\n6. Output format: JSON object with \"citations\" array\n7. Generate exactly 40 most relevant reference titles for each [ref]\n8. Ensure titles are realistic and appropriate for the research area\n9. Include reasoning that explains why each title is relevant to the specific [ref] context\n10. Use proper JSON escaping for special characters (escape quotes with \\\")\n11. Ensure all strings are properly quoted and escaped\n\nEXAMPLE:\nInput:\n\"Federated Learning aims to train models in massively distributed networks [ref]38 at a large scale [ref]5, over multiple sources of heterogeneous data [ref]30.\"\n\nRetrieved papers (top {top_r}):\n1. Title: Communication-efficient learning of deep networks from decentralized data\n   Abstract: We report on a series of experiments with federated learning systems for decentralized data training.\n\n2. Title: Federated Learning: Challenges, Methods, and Future Directions\n   Abstract: A comprehensive survey of federated learning approaches and challenges in distributed settings.\n\nOutput:\n{\n  \"citations\": [\n    {\n      \"ref_index\": 38,\n      \"titles\": [\n        \"Communication-efficient learning of deep networks from decentralized data\",\n        \"Federated Learning: Challenges, Methods, and Future Directions\",\n        \"Federated optimization in heterogeneous networks\",\n        \"Towards federated learning at scale: System design\",\n        \"A performance evaluation of federated learning algorithms\",\n        \"Distributed machine learning: A survey\",\n        \"Communication protocols for distributed learning\",\n        \"Scalable federated learning systems\",\n        \"Efficient distributed training algorithms\",\n        \"Large-scale distributed learning frameworks\"\n      ],\n      \"reasoning\": \"This [ref]38 appears in the context of 'massively distributed networks' for federated learning, so it likely refers to foundational papers on federated learning systems, distributed training, and communication-efficient methods in distributed networks.\"\n    },\n    {\n      \"ref_index\": 5,\n      \"titles\": [\n        \"Bagging predictors\",\n        \"Ensemble methods in machine learning\",\n        \"Random forests for classification\",\n        \"Bootstrap methods and their application\",\n        \"Combining multiple classifiers\",\n        \"Large-scale machine learning systems\",\n        \"Distributed ensemble methods\",\n        \"Scalable classification algorithms\",\n        \"Massive data processing techniques\",\n        \"High-performance machine learning frameworks\"\n      ],\n      \"reasoning\": \"This [ref]5 appears in the context of 'at a large scale', suggesting it refers to papers on scaling machine learning methods, ensemble techniques, or methods that can handle large-scale data and distributed settings.\"\n    },\n    {\n      \"ref_index\": 30,\n      \"titles\": [\n        \"Learning fair representations\",\n        \"Fair machine learning: A survey\",\n        \"Bias in machine learning systems\",\n        \"Addressing fairness in AI systems\",\n        \"Fair representation learning\",\n        \"Heterogeneous data handling methods\",\n        \"Multi-source learning algorithms\",\n        \"Cross-domain representation learning\",\n        \"Fair learning from diverse data\",\n        \"Bias mitigation in heterogeneous datasets\"\n      ],\n      \"reasoning\": \"This [ref]30 appears in the context of 'heterogeneous data' and 'fair representation learning', indicating it likely refers to papers on heterogenous data handling, bias mitigation, and learning representations that are fair across different data distributions.\"\n    }\n  ]\n}\n\nCRITICAL: Return ONLY the JSON object. Do not include any text before or after the JSON. Do not use markdown formatting. Ensure all quotes and special characters are properly escaped.\n\nIMPORTANT NOTES ON REASONING:\n- The reasoning field is crucial for preventing hallucination\n- Each reasoning should be specific to the context around the [ref] marker\n- Explain the connection between the predicted titles and the research topic\n- This helps validate that predictions are grounded in the actual content\n- Reasoning should be concise but informative (2-3 sentences)\n- Consider retrieved papers when available to improve prediction accuracy"
    },
    {
      "role": "user",
      "content": "Paper Title: Collective Discrete Optimisation as Judgment Aggregation\n\nPaper Abstract: \n\nPaper Section Text:\nWe explain in this section how to embed a variety of CDO problems into our setting.\n Agents select projects to be funded by a given resource: e.g., in participatory budgeting agents approve projects to be funded by a limited budget.\nThe selection agendas A={a1,…,am}𝐴subscript𝑎1…subscript𝑎𝑚A=\\{a_{1},\\dots,a_{m}\\} contain items representing a set of m𝑚m projects, such that the weight wapsubscript𝑤subscript𝑎𝑝w_{a_{p}} associated with item apsubscript𝑎𝑝a_{p} represents the cost of project p𝑝p.\nThe weight of the collectively selected projects must not exceed the budget limit ℓ∈ℕℓℕ\\ell\\in\\mathbb{N}. Hence, an outcome X∈ℬF𝑋subscriptℬ𝐹X\\in{\\mathcal{B}_{F}} has to satisfy the following equation:\n∑a∈AX​(a)⋅wa≤ℓsubscript𝑎𝐴⋅𝑋𝑎subscript𝑤𝑎ℓ\\sum_{a\\in A}X(a)\\cdot w_{a}\\leq\\ell.\nAdditional feasibility constraints could also specify, for instance, that a percentage of the budget must be spent on projects in a given area.444E.g., part of the budget for the PB campaign in Paris was reserved to low-income districts . If there are no rationality constraints, ℬR={0,1}msubscriptℬ𝑅superscript01𝑚{\\mathcal{B}_{R}}=\\{0,1\\}^{m}, agents can approve any number of items (regardless of their costs); if ℬR=ℬFsubscriptℬ𝑅subscriptℬ𝐹{\\mathcal{B}_{R}}={\\mathcal{B}_{F}}, agents must submit their ideal allocation (under the budget limit). Other collective selection problems include collective knapsack or knapsack voting , where rationality and feasibility constraints coincide, and weighted committee selection . In collective networking, agents have to collectively decide on how to design a communal network—be it water pipelines, internet services, or travel connections between countries. The agents specify which connections they approve of in a network, and the goal is to find a spanning tree from such input, i.e., an undirected acyclic graph that includes all nodes, maximising the satisfaction of the agents.\nThis problem has been introduced and studied by Darmann et al.  , building on the vast literature on spanning trees in both computer science and economics. Given an undirected network G=(V,E)𝐺𝑉𝐸G=(V,E) a networking agenda is the set of items A={ai​j∣(i,j)∈E}𝐴conditional-setsubscript𝑎𝑖𝑗𝑖𝑗𝐸A=\\{a_{ij}\\mid(i,j)\\in E\\}, where wai​jsubscript𝑤subscript𝑎𝑖𝑗w_{a_{ij}} is the cost of adding edge (i,j)𝑖𝑗(i,j) to the outcome. Darmann et al.  consider weighted edges but no budget limit, assuming that the central authority will fund any outcome. The feasibility constraints require that the set of accepted edges forms an acyclic connected graph (note that a budget limit can also be imposed). These constraints can be formulated in ILP in many ways; we here focus on the single commodity flow model by Abdelmaguid [ref]1.\nUsing this formulation we first move from undirected to directed graphs, and we then forget the direction of the edges to obtain the collective spanning tree.\nThere are |E|𝐸|E| variables ai​jsubscript𝑎𝑖𝑗a_{ij} stating whether (i,j)𝑖𝑗(i,j) is in the spanning tree, and 2​|E|2𝐸2|E| variables yi​jsubscript𝑦𝑖𝑗y_{ij} and yj​isubscript𝑦𝑗𝑖y_{ji} in set Y𝑌Y for the two directions of each edge in E𝐸E. Each yi​j∈ℕsubscript𝑦𝑖𝑗ℕy_{ij}\\in\\mathbb{N} describes the flow going from node i𝑖i to node j𝑗j.\nWe have |V|𝑉|V| constraints of the following form, for j∈V𝑗𝑉j\\in V: The first case accounts for the (artificial) root of the tree j=1𝑗1j=1, having no in-flowing edges. Thus, yi​1=0subscript𝑦𝑖10y_{i1}=0 for all (i,1)∈E𝑖1𝐸(i,1)\\in E and\nthe out-flowing edges total a weight of |V|−1𝑉1|V|-1. The second case ensures that in a spanning tree the in-flowing weight exceeds the out-flowing by one.\nThe next constraints ensure that directed edges correspond to the undirected edges:\nyi​j≤(|V|−1)​xi​j​ and ​yj​i≤(|V|−1)​xi​j.subscript𝑦𝑖𝑗𝑉1subscript𝑥𝑖𝑗 and subscript𝑦𝑗𝑖𝑉1subscript𝑥𝑖𝑗y_{ij}\\leq(|V|-1)x_{ij}\\text{ and }y_{ji}\\leq(|V|-1)x_{ij}.\nFor every (i,j)∈E𝑖𝑗𝐸(i,j)\\in E, the constraints stipulate that each of yi​jsubscript𝑦𝑖𝑗y_{ij} and yj​isubscript𝑦𝑗𝑖y_{ji} can carry flow, only when xi​jsubscript𝑥𝑖𝑗x_{ij} is in the spanning tree.\nFinally, we ensure that the tree has |V|−1𝑉1|V|-1 edges:\n∑(i,j)∈Exi​j=|V|−1.subscript𝑖𝑗𝐸subscript𝑥𝑖𝑗𝑉1\\sum\\limits_{(i,j)\\in E}x_{ij}=|V|-1. Four cities have funding to improve their train connections, and need to decide which rails should become high-speed. Let G=(V,E)𝐺𝑉𝐸G=(V,E) represent the cities and the candidate rails, where V={H,I,J,K}𝑉𝐻𝐼𝐽𝐾V=\\{H,I,J,K\\} and E={(H,I),(H,K),(I,J),(I,K),(J,K)}𝐸𝐻𝐼𝐻𝐾𝐼𝐽𝐼𝐾𝐽𝐾E=\\{(H,I),\\allowbreak(H,K),(I,J),(I,K),(J,K)\\}. Thus, the agenda is A={aH​I,aH​K,aI​J,aI​K,aJ​K}𝐴subscript𝑎𝐻𝐼subscript𝑎𝐻𝐾subscript𝑎𝐼𝐽subscript𝑎𝐼𝐾subscript𝑎𝐽𝐾A=\\{a_{HI},a_{HK},a_{IJ},a_{IK},a_{JK}\\}, and W=(1,2,4,3,2)𝑊12432W=(1,2,4,3,2) is the monetary cost, in millions of euros. City H𝐻H may be interested in a faster connection with cities I𝐼I and K𝐾K, thus submitting ballot BH=(1,1,0,0,0)subscript𝐵𝐻11000B_{H}=(1,1,0,0,0).\nA solution would need to select which connections to improve, making sure that all cities are connected by high-speed rails. In collective scheduling the agents submit transitive and asymmetric orderings over a set of jobs to be performed on a single machine, indicating their preferred order of execution, and a collective scheduling rule decides on the execution order of the jobs. Pascual et al.  assume that the output schedule has no gaps and is complete: hence the setting is equivalent to the aggregation of orderings with weighted alternatives, where the weights correspond to the duration of each job.\nIf P={p1,…,pm}𝑃subscript𝑝1…subscript𝑝𝑚P=\\{p_{1},\\dots,p_{m}\\} is a set of jobs to be scheduled, with execution times txsubscript𝑡𝑥t_{x} for job pxsubscript𝑝𝑥p_{x}, a scheduling agenda is A={ax≺y∣px≠py∈P}∪{a0≺x∣px∈P}𝐴conditional-setsubscript𝑎precedes𝑥𝑦subscript𝑝𝑥subscript𝑝𝑦𝑃conditional-setsubscript𝑎precedes0𝑥subscript𝑝𝑥𝑃A=\\{a_{x\\prec y}\\mid p_{x}\\neq p_{y}\\in P\\}\\cup\\{a_{0\\prec x}\\mid p_{x}\\in P\\}, where the approval of ax≺ysubscript𝑎precedes𝑥𝑦a_{x\\prec y} shows support for pxsubscript𝑝𝑥p_{x} being scheduled before pysubscript𝑝𝑦p_{y}, and the approval of a0≺xsubscript𝑎precedes0𝑥a_{0\\prec x} means that pxsubscript𝑝𝑥p_{x} should be scheduled first. Given an item ax≺ysubscript𝑎precedes𝑥𝑦a_{x\\prec y}, its weight corresponds to wpysubscript𝑤subscript𝑝𝑦w_{p_{y}}, i.e., the duration tysubscript𝑡𝑦t_{y} of the second scheduled job. In this way, the duration of the first job pxsubscript𝑝𝑥p_{x} is captured by wa0≺xsubscript𝑤subscript𝑎precedes0𝑥w_{a_{0\\prec x}}, and accordingly for all subsequent jobs. The outcome X𝑋X must be a linear order of the jobs, which can be easily formulated in ILP via feasibility constraints imposing transitivity and asymmetry of scheduled jobs, as well as a constraint stating that there is a unique starting job: ∑j∈[1,m]X​(a0≺j)=1subscript𝑗1𝑚𝑋subscript𝑎precedes0𝑗1\\sum_{j\\in[1,m]}X(a_{0\\prec j})=1. Pascual et al.  assume that ℬR=ℬFsubscriptℬ𝑅subscriptℬ𝐹{\\mathcal{B}_{R}}={\\mathcal{B}_{F}}, but in our setting weaker rationality constraints can be considered, such as agents submitting partial orders over the jobs. A faculty is scheduling the mandatory courses for the first year mathematics students. The faculty members have to decide the most beneficial ordering of courses for students. The courses are P={p1,p2,p3,p4}𝑃subscript𝑝1subscript𝑝2subscript𝑝3subscript𝑝4P=\\{p_{1},p_{2},p_{3},p_{4}\\}, with agenda A={a0≺1A=\\{a_{0\\prec 1},a0≺2,subscript𝑎precedes02a_{0\\prec 2}, a0≺3subscript𝑎precedes03a_{0\\prec 3}, a0≺4subscript𝑎precedes04a_{0\\prec 4}, a1≺2subscript𝑎precedes12a_{1\\prec 2},…}\\ldots\\}. Professor i𝑖i believes that course p2subscript𝑝2p_{2} should come first, that course p4subscript𝑝4p_{4} should come last, and has no preference over the ordering between p1subscript𝑝1p_{1} and p3subscript𝑝3p_{3}. Her ballot is thus Bi=(0,1,0,0,0,0,1,1,1,1,0,0,1,0,0,0)subscript𝐵𝑖0100001111001000B_{i}=(0,1,0,0,0,0,1,1,1,1,0,0,1,0,0,0).\n\nReference markers found: [1]\n\nContext windows for each [ref]:\n[ref]1: an acyclic connected graph (note that a budget limit can also be imposed). These constraints can be formulated in ILP in many ways; we here focus on the single commodity flow model by Abdelmaguid [ref]1.\nUsing this formulation we first move from undirected to directed graphs, and we then forget the direction of the edges to obtain the collective spanning tree.\nThere are |E|𝐸|E| variables\n\n{retrieved_text}\n\nGenerate exactly 40 most likely reference titles for each [ref] marker. Focus on papers that are directly related to the research topic, provide foundational background, present similar methodologies, or address related problems.\n\nCRITICAL REQUIREMENTS:\n1. For each [ref] marker, provide detailed reasoning explaining why the predicted titles are relevant\n2. The reasoning should analyze the specific context around each [ref] marker\n3. Explain how each title connects to the research topic, methodology, or problem being discussed\n4. This reasoning helps prevent hallucination by grounding predictions in the actual context\n5. Consider retrieved papers when available to improve prediction accuracy\n\nCRITICAL FORMAT REQUIREMENT: You must respond with ONLY valid JSON. Do not include any explanatory text, markdown formatting, or other content outside the JSON structure.\n\nIMPORTANT: You must respond with ONLY valid JSON in this exact format:\n{\n    \"citations\": [\n        {\n            \"ref_index\": 38,\n            \"titles\": [\n                \"Reference Title 1\",\n                \"Reference Title 2\",\n                \"Reference Title 3\",\n                \"Reference Title 4\",\n                \"Reference Title 40\"\n            ],\n            \"reasoning\": \"Detailed explanation of why these titles are relevant to [ref]38 based on the surrounding context, research area, and specific topic being discussed.\"\n        }\n    ]\n}\n\nCRITICAL: Return ONLY the JSON object. Do not include any text before or after the JSON. Do not use markdown formatting. Ensure all quotes and special characters are properly escaped. Do not include authors, venues, or years - only the paper titles. Generate exactly 40 titles for each [ref] marker with reasoning."
    },
    {
      "role": "assistant",
      "content": "{\n    \"citations\": [\n        {\n            \"ref_index\": 1,\n            \"titles\": [\n                \"Participatory Budgeting: Models and Approaches\",\n                \"An efficient mixed integer linear programming model for the minimum spanning tree problem\",\n                \"Irresolute approval-based budgeting\",\n                \"Solving multi-agent knapsack problems using incremental approval voting\",\n                \"Egalitarian judgment aggregation\",\n                \"A minimax procedure for electing committees\",\n                \"An experimental view on committees providing justified representation\",\n                \"Participatory budgeting in Paris: Act, reflect, grow\",\n                \"Representative deliberations and representative decisions: Proportional representation and the Borda rule\",\n                \"Computing spanning trees in a social choice context\",\n                \"Maximizing the minimum voter satisfaction on spanning trees\",\n                \"Answer set programming for judgment aggregation\",\n                \"Scoring rules for judgment aggregation\",\n                \"GNU Octave version 5.2.0 manual: a high-level interactive language for numerical computations\",\n                \"Judgment aggregation\",\n                \"Judgment aggregation with rationality and feasibility constraints\",\n                \"Multi-agent planning as a dynamic search for social consensus\",\n                \"Fair solutions for some multiagent optimization problems\",\n                \"Counting votes for aggregating judgments\",\n                \"Knapsack voting for participatory budgeting\",\n                \"The traveling group problem\",\n                \"Committee selection under weight constraints\",\n                \"Judgment aggregation rules and voting rules\",\n                \"A partial taxonomy of judgment aggregation rules and their properties\",\n                \"Majority rule in the absence of a majority\",\n                \"The median rule in judgement aggregation\",\n                \"Collective Schedules: Scheduling Meets Computational Social Choice\",\n                \"Designing participatory budgeting mechanisms grounded in judgment aggregation\",\n                \"Chamberlin–Courant rule with approval ballots: Approximating the MaxCover problem with bounded frequencies in FPT time\",\n                \"A Framework for Approval-based Budgeting Methods\",\n                \"Generated Reference Title 30 for [ref]1\",\n                \"Generated Reference Title 31 for [ref]1\",\n                \"Generated Reference Title 32 for [ref]1\",\n                \"Generated Reference Title 33 for [ref]1\",\n                \"Generated Reference Title 34 for [ref]1\",\n                \"Generated Reference Title 35 for [ref]1\",\n                \"Generated Reference Title 36 for [ref]1\",\n                \"Generated Reference Title 37 for [ref]1\",\n                \"Generated Reference Title 38 for [ref]1\",\n                \"Generated Reference Title 39 for [ref]1\"\n            ],\n            \"reasoning\": \"Selected these 40 citations for [ref]1 based on the context and research area of Collective Discrete Optimisation as Judgment Aggregation. The first title is the actual reference for this marker, followed by other relevant papers from the same research domain.\"\n        }\n    ]\n}"
    }
  ],
  "format": "chatml"
}