{
  "paper_id": "2302.06873v2",
  "title": "Lero: A Learning-to-Rank Query Optimizer",
  "abstract": "Abstract.\nA recent line of works apply machine learning techniques to assist or rebuild cost-based query optimizers in DBMS. While exhibiting superiority in some benchmarks, their deficiencies, e.g., unstable performance, high training cost, and slow model updating, stem from the inherent hardness of predicting the cost or latency of execution plans using machine learning models.\nIn this paper, we introduce a learning-to-rank query optimizer, called Lero, which builds on top of a native query optimizer and continuously learns to improve the optimization performance. The key observation is that the relative order or rank of plans, rather than the exact cost or latency, is sufficient for query optimization. Lero employs a pairwise approach to train a classifier to compare any two plans and tell which one is better. Such a binary classification task is much easier than the regression task to predict the cost or latency, in terms of model efficiency and accuracy. Rather than building a learned optimizer from scratch, Lero is designed to leverage decades of wisdom of databases and improve the native query optimizer. With its non-intrusive design, Lero can be implemented on top of any existing DBMS with minimal integration efforts.\nWe implement Lero and demonstrate its outstanding performance using PostgreSQL. In our experiments, Lero achieves near optimal performance on several benchmarks.\nIt reduces the plan execution time of the native optimizer in PostgreSQL by up to 70%percent7070\\% and other learned query optimizers by up to 37%percent3737\\%. Meanwhile, Lero continuously learns and automatically adapts to query workloads and changes in data.",
  "reference_labels": [
    {
      "index": 0,
      "title": "인공지능 기반 공격 그래프 생성",
      "abstract": "",
      "year": "",
      "venue": "",
      "authors": "",
      "orig_title": "",
      "paper_id": "2311.14342v2"
    },
    {
      "index": 1,
      "title": "Balsa Implementation",
      "abstract": "",
      "year": "2022",
      "venue": "GitHub",
      "authors": "Bal"
    },
    {
      "index": 2,
      "title": "Lero on PostgreSQL",
      "abstract": "",
      "year": "2022",
      "venue": "GitHub",
      "authors": "Ler"
    },
    {
      "index": 3,
      "title": "Database Tuning Advisor for Microsoft SQL Server 2005",
      "abstract": "",
      "year": "2004",
      "venue": "VLDB",
      "authors": "Sanjay Agrawal, Surajit Chaudhuri, Lubor Kollár, Arunprasad P. Marathe, Vivek R. Narasayya, and Manoj Syamala"
    },
    {
      "index": 4,
      "title": "Scope: easy and efficient parallel processing of massive data sets",
      "abstract": "",
      "year": "2008",
      "venue": "PVLDB",
      "authors": "Ronnie Chaiken, Bob Jenkins, Per-Åke Larson, Bill Ramsey, Darren Shakib, Simon Weaver, and Jingren Zhou"
    },
    {
      "index": 5,
      "title": "An Efficient Cost-Driven Index Selection Tool for Microsoft SQL Server",
      "abstract": "",
      "year": "1997",
      "venue": "VLDB",
      "authors": "Surajit Chaudhuri and Vivek R. Narasayya"
    },
    {
      "index": 6,
      "title": "Revisiting Distributed Synchronous SGD",
      "abstract": "",
      "year": "2016",
      "venue": "arXiv",
      "authors": "Jianmin Chen, Xinghao Pan, Rajat Monga, Samy Bengio, and Rafal Jozefowicz",
      "orig_title": "Revisiting distributed synchronous SGD",
      "paper_id": "1604.00981v3"
    },
    {
      "index": 7,
      "title": "TPC-DS Vesion 2 and Version 3",
      "abstract": "",
      "year": "2021",
      "venue": "TPC",
      "authors": "Transaction Processing Performance Council(TPC)"
    },
    {
      "index": 8,
      "title": "TPC-H Vesion 2 and Version 3",
      "abstract": "",
      "year": "2021",
      "venue": "TPC",
      "authors": "Transaction Processing Performance Council(TPC)"
    },
    {
      "index": 9,
      "title": "Efficiently approximating query optimizer plan diagrams",
      "abstract": "",
      "year": "2008",
      "venue": "Proc. VLDB Endow.",
      "authors": "Atreyee Dey, Sourjya Bhaumik, Harish Doraiswamy, and Jayant R. Haritsa"
    },
    {
      "index": 10,
      "title": "Ai meets ai: Leveraging query executions to improve index recommendations",
      "abstract": "",
      "year": "2019",
      "venue": "SIGMOD",
      "authors": "Bailu Ding, Sudipto Das, Ryan Marcus, Wentao Wu, Surajit Chaudhuri, and Vivek R Narasayya"
    },
    {
      "index": 11,
      "title": "Identifying robust plans through plan diagram reduction",
      "abstract": "",
      "year": "2008",
      "venue": "Proc. VLDB Endow.",
      "authors": "Harish Doraiswamy, Pooja N. Darera, and Jayant R. Haritsa"
    },
    {
      "index": 12,
      "title": "Selectivity estimation for range predicates using lightweight models",
      "abstract": "",
      "year": "2019",
      "venue": "PVLDB",
      "authors": "Anshuman Dutt, Chi Wang, Azade Nazi, Srikanth Kandula, Vivek Narasayya, and Surajit Chaudhuri"
    },
    {
      "index": 13,
      "title": "An efficient boosting algorithm for combining preferences",
      "abstract": "",
      "year": "2003",
      "venue": "Journal of machine learning research",
      "authors": "Yoav Freund, Raj Iyer, Robert E Schapire, and Yoram Singer"
    },
    {
      "index": 14,
      "title": "Optimum polynomial retrieval functions based on the probability ranking principle",
      "abstract": "",
      "year": "1989",
      "venue": "ACM Transactions on Information Systems",
      "authors": "Norbert Fuhr"
    },
    {
      "index": 15,
      "title": "Github repository: STATS End-to-End CardEst Benchmark",
      "abstract": "",
      "year": "2021",
      "venue": "GitHub",
      "authors": "Yuxing Han"
    },
    {
      "index": 16,
      "title": "Cardinality Estimation in DBMS: A Comprehensive Benchmark Evaluation",
      "abstract": "",
      "year": "2021",
      "venue": "PVLDB",
      "authors": "Yuxing Han, Ziniu Wu, Peizhi Wu, Rong Zhu, Jingyi Yang, Tan Wei Liang, Kai Zeng, Gao Cong, Yanzhao Qin, Andreas Pfadler, Zhengping Qian, Jingren Zhou, Jiangneng Li, and Bin Cui",
      "orig_title": "Cardinality Estimation in DBMS: A Comprehensive Benchmark Evaluation",
      "paper_id": "2109.05877v3"
    },
    {
      "index": 17,
      "title": "Deep Q-learning from Demonstrations",
      "abstract": "",
      "year": "2018",
      "venue": "AAAI",
      "authors": "Todd Hester, Matej Vecerik, Olivier Pietquin, Marc Lanctot, Tom Schaul, Bilal Piot, Dan Horgan, John Quan, Andrew Sendonaris, Ian Osband, et al.",
      "orig_title": "Deep q-learning from demonstrations",
      "paper_id": "1704.03732v4"
    },
    {
      "index": 18,
      "title": "DeepDB: Learn from Data, not from Queries!",
      "abstract": "",
      "year": "2020",
      "venue": "PVLDB",
      "authors": "Benjamin Hilprecht, Andreas Schmidt, Moritz Kulessa, Alejandro Molina, Kristian Kersting, and Carsten Binnig",
      "orig_title": "DeepDB: learn from data, not from queries!",
      "paper_id": "1909.00607v1"
    },
    {
      "index": 19,
      "title": "Preference Learning",
      "abstract": "",
      "year": "2011",
      "venue": "Preference Learning",
      "authors": "Fürnkranz Johannes and Hüllermeier Eyke"
    },
    {
      "index": 20,
      "title": "Scheduling with inserted idle time: problem taxonomy and literature review",
      "abstract": "",
      "year": "2000",
      "venue": "Operations Research",
      "authors": "John J Kanet and V Sridharan"
    },
    {
      "index": 21,
      "title": "Learning to rank for recommender systems",
      "abstract": "",
      "year": "2013",
      "venue": "RecSys",
      "authors": "Alexandros Karatzoglou, Linas Baltrunas, and Yue Shi"
    },
    {
      "index": 22,
      "title": "Learned Cardinalities: Estimating Correlated Joins with Deep Learning",
      "abstract": "",
      "year": "2019",
      "venue": "CIDR",
      "authors": "Andreas Kipf, Thomas Kipf, Bernhard Radke, Viktor Leis, Peter Boncz, and Alfons Kemper",
      "orig_title": "Learned cardinalities: Estimating correlated joins with deep learning",
      "paper_id": "1809.00677v2"
    },
    {
      "index": 23,
      "title": "Learning to Optimize Join Queries With Deep Reinforcement Learning",
      "abstract": "",
      "year": "2018",
      "venue": "arXiv",
      "authors": "Sanjay Krishnan, Zongheng Yang, Ken Goldberg, Joseph Hellerstein, and Ion Stoica",
      "orig_title": "Learning to optimize join queries with deep reinforcement learning",
      "paper_id": "1808.03196v2"
    },
    {
      "index": 24,
      "title": "How good are query optimizers, really?",
      "abstract": "",
      "year": "2015",
      "venue": "PVLDB",
      "authors": "Viktor Leis, Andrey Gubichev, Atanas Mirchev, Peter Boncz, Alfons Kemper, and Thomas Neumann"
    },
    {
      "index": 25,
      "title": "Robust estimation of resource consumption for sql queries using statistical techniques",
      "abstract": "",
      "year": "2012",
      "venue": "arXiv",
      "authors": "Jiexing Li, Arnd Christian König, Vivek Narasayya, and Surajit Chaudhuri"
    },
    {
      "index": 26,
      "title": "Mcrank: Learning to rank using multiple classification and gradient boosting",
      "abstract": "",
      "year": "2007",
      "venue": "Advances in neural information processing systems",
      "authors": "Ping Li, Qiang Wu, and Christopher Burges"
    },
    {
      "index": 27,
      "title": "Fauce: fast and accurate deep ensembles with uncertainty for cardinality estimation",
      "abstract": "",
      "year": "2021",
      "venue": "PVLDB",
      "authors": "Jie Liu, Wenqian Dong, Qingqing Zhou, and Dong Li"
    },
    {
      "index": 28,
      "title": "Learning to Rank for Information Retrieval",
      "abstract": "",
      "year": "2009",
      "venue": "Foundations and Trends in Information Retrieval",
      "authors": "Tie-Yan Liu"
    },
    {
      "index": 29,
      "title": "Personalized Re-ranking with Item Relationships for E-commerce",
      "abstract": "",
      "year": "2020",
      "venue": "CIKM",
      "authors": "Weiwen Liu, Qing Liu, Ruiming Tang, Junyang Chen, Xiuqiang He, and Pheng Ann Heng"
    },
    {
      "index": 30,
      "title": "Bao appendix",
      "abstract": "",
      "year": "2020",
      "venue": "rmarcus.info",
      "authors": "Ryan Marcus"
    },
    {
      "index": 31,
      "title": "Github repository: Bao for PostgreSQL",
      "abstract": "",
      "year": "2020",
      "venue": "GitHub",
      "authors": "Ryan Marcus"
    },
    {
      "index": 32,
      "title": "Bao: Making learned query optimization practical",
      "abstract": "",
      "year": "2021",
      "venue": "SIGMOD",
      "authors": "Ryan Marcus, Parimarjan Negi, Hongzi Mao, Nesime Tatbul, Mohammad Alizadeh, and Tim Kraska"
    },
    {
      "index": 33,
      "title": "Neo: A Learned Query Optimizer",
      "abstract": "",
      "year": "2019",
      "venue": "PVLDB",
      "authors": "Ryan Marcus, Parimarjan Negi, Hongzi Mao, Chi Zhang, Mohammad Alizadeh, Tim Kraska, Olga Papaemmanouil, and Nesime Tatbul",
      "orig_title": "Neo: A Learned Query Optimizer",
      "paper_id": "1904.03711v1"
    },
    {
      "index": 34,
      "title": "Plan-Structured Deep Neural Network Models for Query Performance Prediction",
      "abstract": "",
      "year": "2019",
      "venue": "PVLDB",
      "authors": "Ryan Marcus and Olga Papaemmanouil",
      "orig_title": "Plan-structured deep neural network models for query performance prediction",
      "paper_id": "1902.00132v1"
    },
    {
      "index": 35,
      "title": "Preventing Bad Plans by Bounding the Impact of Cardinality Estimation Errors",
      "abstract": "",
      "year": "2009",
      "venue": "VLDB",
      "authors": "Guido Moerkotte, Thomas Neumann, and Gabriele Steidl"
    },
    {
      "index": 36,
      "title": "Convolutional Neural Networks over Tree Structures for Programming Language Processing",
      "abstract": "",
      "year": "2016",
      "venue": "AAAI",
      "authors": "Lili Mou, Ge Li, Lu Zhang, Tao Wang, and Zhi Jin",
      "orig_title": "Convolutional neural networks over tree structures for programming language processing",
      "paper_id": "1409.5718v2"
    },
    {
      "index": 37,
      "title": "Steering Query Optimizers: A Practical Take on Big Data Workloads",
      "abstract": "",
      "year": "2021",
      "venue": "SIGMOD",
      "authors": "Parimarjan Negi, Matteo Interlandi, Ryan Marcus, Mohammad Alizadeh, Tim Kraska, Marc Friedman, and Alekh Jindal"
    },
    {
      "index": 38,
      "title": "SetRank: Learning a Permutation-Invariant Ranking Model for Information Retrieval",
      "abstract": "",
      "year": "2020",
      "venue": "SIGIR",
      "authors": "Liang Pang, Jun Xu, Qingyao Ai, Yanyan Lan, Xueqi Cheng, and Jirong Wen",
      "orig_title": "Setrank: Learning a permutation-invariant ranking model for information retrieval",
      "paper_id": "1912.05891v2"
    },
    {
      "index": 39,
      "title": "Analyzing Plan Diagrams of Database Query Optimizers",
      "abstract": "",
      "year": "2005",
      "venue": "VLDB",
      "authors": "Naveen Reddy and Jayant R. Haritsa"
    },
    {
      "index": 40,
      "title": "Access path selection in a relational database management system",
      "abstract": "",
      "year": "1989",
      "venue": "Readings in Artificial Intelligence and Databases",
      "authors": "P Griffiths Selinger, Morton M Astrahan, Donald D Chamberlin, Raymond A Lorie, and Thomas G Price"
    },
    {
      "index": 41,
      "title": "An End-to-End Learning-based Cost Estimator",
      "abstract": "",
      "year": "2019",
      "venue": "PLDB",
      "authors": "Ji Sun and Guoliang Li",
      "orig_title": "An end-to-end learning-based cost estimator",
      "paper_id": "1906.02560v1"
    },
    {
      "index": 42,
      "title": "PiRank: Scalable Learning To Rank via Differentiable Sorting",
      "abstract": "",
      "year": "2021",
      "venue": "Advances in Neural Information Processing Systems",
      "authors": "Robin Swezey, Aditya Grover, Bruno Charron, and Stefano Ermon",
      "orig_title": "Pirank: Scalable learning to rank via differentiable sorting",
      "paper_id": "2012.06731v2"
    },
    {
      "index": 43,
      "title": "On the likelihood that one unknown probability exceeds another in view of the evidence of two samples",
      "abstract": "",
      "year": "1933",
      "venue": "Biometrika",
      "authors": "William R Thompson"
    },
    {
      "index": 44,
      "title": "SkinnerDB: Regret-Bounded Query Evaluation via Reinforcement Learning",
      "abstract": "",
      "year": "2019",
      "venue": "SIGMOD",
      "authors": "Immanuel Trummer, Junxiong Wang, Deepak Maram, Samuel Moseley, Saehan Jo, and Joseph Antonakakis",
      "orig_title": "Skinnerdb: Regret-bounded query evaluation via reinforcement learning",
      "paper_id": "1901.05152v1"
    },
    {
      "index": 45,
      "title": "Lightweight graphical models for selectivity estimation without independence assumptions",
      "abstract": "",
      "year": "2011",
      "venue": "PVLDB",
      "authors": "Kostas Tzoumas, Amol Deshpande, and Christian S Jensen"
    },
    {
      "index": 46,
      "title": "DB2 Advisor: An Optimizer Smart Enough to Recommend Its Own Indexes",
      "abstract": "",
      "year": "2000",
      "venue": "ICDE",
      "authors": "Gary Valentin, Michael Zuliani, Daniel C. Zilio, Guy M. Lohman, and Alan Skelley"
    },
    {
      "index": 47,
      "title": "Rank and relevance in novelty and diversity metrics for recommender systems",
      "abstract": "",
      "year": "2011",
      "venue": "ACM conference on Recommender systems",
      "authors": "Saúl Vargas and Pablo Castells"
    },
    {
      "index": 48,
      "title": "Are We Ready For Learned Cardinality Estimation?",
      "abstract": "",
      "year": "2021",
      "venue": "PVLDB",
      "authors": "Xiaoying Wang, Changbo Qu, Weiyuan Wu, Jiannan Wang, and Qingqing Zhou"
    },
    {
      "index": 49,
      "title": "Predicting query execution time: Are optimizer cost models really unusable?",
      "abstract": "",
      "year": "2013",
      "venue": "ICDE",
      "authors": "Wentao Wu, Yun Chi, Shenghuo Zhu, Junichi Tatemura, Hakan Hacigümüs, and Jeffrey F Naughton"
    },
    {
      "index": 50,
      "title": "BayesCard: A Unified Bayesian Framework for Cardinality Estimation",
      "abstract": "",
      "year": "2020",
      "venue": "arXiv",
      "authors": "Ziniu Wu and Amir Shaikhha"
    },
    {
      "index": 51,
      "title": "Balsa: Learning a Query Optimizer Without Expert Demonstrations",
      "abstract": "",
      "year": "2022",
      "venue": "SIGMOD",
      "authors": "Zongheng Yang, Wei-Lin Chiang, Sifei Luan, Gautam Mittal, Michael Luo, and Ion Stoica",
      "orig_title": "Balsa: Learning a Query Optimizer Without Expert Demonstrations",
      "paper_id": "2201.01441v2"
    },
    {
      "index": 52,
      "title": "NeuroCard: One Cardinality Estimator for All Tables",
      "abstract": "",
      "year": "2021",
      "venue": "PVLDB",
      "authors": "Zongheng Yang, Amog Kamsetty, Sifei Luan, Eric Liang, Yan Duan, Xi Chen, and Ion Stoica",
      "orig_title": "NeuroCard: One Cardinality Estimator for All Tables",
      "paper_id": "2006.08109v2"
    },
    {
      "index": 53,
      "title": "Deep Unsupervised Cardinality Estimation",
      "abstract": "",
      "year": "2019",
      "venue": "PVLDB",
      "authors": "Zongheng Yang, Eric Liang, Amog Kamsetty, Chenggang Wu, Yan Duan, Xi Chen, Pieter Abbeel, Joseph M Hellerstein, Sanjay Krishnan, and Ion Stoica",
      "orig_title": "Deep unsupervised cardinality estimation",
      "paper_id": "1905.04278v2"
    },
    {
      "index": 54,
      "title": "Reinforcement learning with tree-lstm for join order selection",
      "abstract": "",
      "year": "2020",
      "venue": "ICDE",
      "authors": "Xiang Yu, Guoliang Li, Chengliang Chai, and Nan Tang"
    },
    {
      "index": 55,
      "title": "Efficient Deep Learning Pipelines for Accurate Cost Estimations Over Large Scale Query Workload",
      "abstract": "",
      "year": "2021",
      "venue": "SIGMOD",
      "authors": "Johan Kok Zhi Kang, Sien Yi Tan, Feng Cheng, Shixuan Sun, and Bingsheng He",
      "orig_title": "Efficient Deep Learning Pipelines for Accurate Cost Estimations Over Large Scale Query Workload",
      "paper_id": "2103.12465v1"
    },
    {
      "index": 56,
      "title": "A survey on contextual multi-armed bandits",
      "abstract": "",
      "year": "2015",
      "venue": "arXiv",
      "authors": "Li Zhou"
    },
    {
      "index": 57,
      "title": "Query performance prediction for concurrent queries using graph embedding",
      "abstract": "",
      "year": "2020",
      "venue": "PVLDB",
      "authors": "Xuanhe Zhou, Ji Sun, Guoliang Li, and Jianhua Feng"
    },
    {
      "index": 58,
      "title": "Learned Query Optimizer: At the Forefront of AI-Driven Databases.",
      "abstract": "",
      "year": "2022",
      "venue": "EDBT",
      "authors": "Rong Zhu, Ziniu Wu, Chengliang Chai, Andreas Pfadler, Bolin Ding, Guoliang Li, and Jingren Zhou"
    },
    {
      "index": 59,
      "title": "FLAT: Fast, Lightweight and Accurate Method for Cardinality Estimation",
      "abstract": "",
      "year": "2021",
      "venue": "PVLDB",
      "authors": "Rong Zhu, Ziniu Wu, Yuxing Han, Kai Zeng, Andreas Pfadler, Zhengping Qian, Jingren Zhou, and Bin Cui",
      "orig_title": "FLAT: Fast, Lightweight and Accurate Method for Cardinality Estimation",
      "paper_id": "2011.09022v5"
    }
  ]
}